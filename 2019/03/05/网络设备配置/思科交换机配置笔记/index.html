<!DOCTYPE html>













<html class="theme-next gemini" lang>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">











<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.0.1',
    sidebar: {"position":"left","display":"hide","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: true,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"expandIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="交换机(Switch)是一种用于电信号转发的网络设备,它可以为接入交换机的任意两个网络节点提供独享的电信号通路,最常见的交换机是以太网交换机,其他常见的还有电话语音交换机、光纤交换机等,交换机是集线器的升级替代产品,理论上讲交换机就是按照通信两端传输信息的需求,将需要的信息发送到目标设备上的网络组件.">
<meta name="keywords" content="网络设备配置,Cisco">
<meta property="og:type" content="article">
<meta property="og:title" content="思科交换机配置笔记">
<meta property="og:url" content="https://www.mkdirs.com/2019/03/05/网络设备配置/思科交换机配置笔记/index.html">
<meta property="og:site_name" content="我的个人博客">
<meta property="og:description" content="交换机(Switch)是一种用于电信号转发的网络设备,它可以为接入交换机的任意两个网络节点提供独享的电信号通路,最常见的交换机是以太网交换机,其他常见的还有电话语音交换机、光纤交换机等,交换机是集线器的升级替代产品,理论上讲交换机就是按照通信两端传输信息的需求,将需要的信息发送到目标设备上的网络组件.">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://www.mkdirs.com/picture/20190306155829.jpg">
<meta property="og:image" content="https://www.mkdirs.com/picture/20190306174524.jpg">
<meta property="og:image" content="https://www.mkdirs.com/picture/20190307175817.jpg">
<meta property="og:image" content="https://www.mkdirs.com/picture/20190308135714.jpg">
<meta property="og:image" content="https://www.mkdirs.com/picture/20190308201953.jpg">
<meta property="og:image" content="https://www.mkdirs.com/picture/20190309124359.jpg">
<meta property="og:updated_time" content="2019-04-16T06:13:05.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="思科交换机配置笔记">
<meta name="twitter:description" content="交换机(Switch)是一种用于电信号转发的网络设备,它可以为接入交换机的任意两个网络节点提供独享的电信号通路,最常见的交换机是以太网交换机,其他常见的还有电话语音交换机、光纤交换机等,交换机是集线器的升级替代产品,理论上讲交换机就是按照通信两端传输信息的需求,将需要的信息发送到目标设备上的网络组件.">
<meta name="twitter:image" content="https://www.mkdirs.com/picture/20190306155829.jpg">



  <link rel="alternate" href="/atom.xml" title="我的个人博客" type="application/atom+xml">




  <link rel="canonical" href="https://www.mkdirs.com/2019/03/05/网络设备配置/思科交换机配置笔记/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>思科交换机配置笔记 | 我的个人博客</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">我的个人博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.mkdirs.com/2019/03/05/网络设备配置/思科交换机配置笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王瑞">
      <meta itemprop="description" content="记录点滴技术成长之路">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">思科交换机配置笔记

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-05 10:35:20" itemprop="dateCreated datePublished" datetime="2019-03-05T10:35:20+08:00">2019-03-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-16 14:13:05" itemprop="dateModified" datetime="2019-04-16T14:13:05+08:00">2019-04-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/网络设备配置/" itemprop="url" rel="index"><span itemprop="name">网络设备配置</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    
    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>交换机(Switch)是一种用于电信号转发的网络设备,它可以为接入交换机的任意两个网络节点提供独享的电信号通路,最常见的交换机是以太网交换机,其他常见的还有电话语音交换机、光纤交换机等,交换机是集线器的升级替代产品,理论上讲交换机就是按照通信两端传输信息的需求,将需要的信息发送到目标设备上的网络组件.</p>
<a id="more"></a>
<p>交换机是一种交换式集线器,其基于MAC地址识别,能完成封装转发数据包功能的网络设备.交换机可以学习MAC地址,并把其存放在内部地址表中,通过在数据帧的始发者和目标接收者之间建立临时的交换路径,使数据帧直接由源地址到达目的地址.</p>
<p>交换机内部拥有一条很高带宽的背板总线和内部交换矩阵所有的端口都挂接在这条背板总线上控制电路收到数据包以后,处理端口会查找内存中的地址对照表以确定目的MAC地址的网卡NIC挂接在哪个端口上,通过内部交换矩阵迅速将数据包传送到目的端口目的MAC若不存在才广播到所有的端口,接收端口回应后交换机会学习新的地址,并把它添加入内部MAC地址表中.</p>
<blockquote>
<p><i class="fa fa-plus" aria-hidden="true"></i> 关于交换机的分类:</p>
<blockquote>
<p>1.根据网络覆盖范围划分交换机:广域网交换机和局域网交换机<br>2.根据交换机端口结构划分交换机:固定端口交换机和模块化交换机<br>3.根据工作协议层划分交换机:二层交换机、三层交换机、四层交换机<br>4.根据支持网管功能划分交换机:网管型交换机和非网管理型交换机<br>5.根据传输介质划分交换机:以太网交换机、快速以太网交换机、ATM交换机、FDDI交换机、令牌环交换机<br>6.根据应用网络层次划分交换机:企业级交换机、校园网交换机、部门级交换机、工作组交换机、桌机交换机</p>
</blockquote>
</blockquote>
<blockquote>
<p><i class="fa fa-plus" aria-hidden="true"></i> 关于二层交换机:</p>
<blockquote>
<p>二层交换机是对应于OSI/RM的第二协议层来定义的,因为它只能工作在OSI/RM开放体系模型的第二层,即数据链路层.二层交换机依赖于链路层中的信息(如MAC地址)完成不同端口数据间的线速交换,一般应用于小型企业或中型以上企业网络的桌面层次.</p>
</blockquote>
</blockquote>
<blockquote>
<p><i class="fa fa-plus" aria-hidden="true"></i> 关于三层交换机:</p>
<blockquote>
<p>三层交换机是对应于OSI/RM开放体系模型的第三层,即网络层来定义的,也就是说这类交换机可以工作在网络层,它比第二层交换机更加高档,功能更加强.当网络规模较大时,可以根据特殊应用需求划分为小面独立的VLAN网段,以减小广播所造成的影响,通常这类交换机是采用模块化结构,以适应灵活配置的需要.</p>
</blockquote>
</blockquote>
<p><br></p>
<h2 id="交换机的初始化"><a href="#交换机的初始化" class="headerlink" title="交换机的初始化"></a>交换机的初始化</h2><p>下面的命令方式将对交换机的基本配置,包括配置交换机主机名,特权模式密码,管理接口,IP地址等.</p>
<p>1.首先登陆思科交换机,并进入特权模式,并配置好主机名称,此处交换机名称配置为<code>lyshark</code>.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Switch&gt; enable                        // 进入特权模式</span><br><span class="line">Switch# configure terminal            // 使用全局配置模式</span><br><span class="line">Switch(config)# hostname lyshark      // 配置交换机名称</span><br><span class="line">lyshark(config)#</span><br></pre></td></tr></table></figure></p>
<p>2.开启0号模块下的1-3号接口,配置交换机端口速率并启用指定端口.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lyshark(config)# interface range fa0/1-3     // 选择配置端口</span><br><span class="line">lyshark(config-if-range)# speed 100          // 配置所选端口的速率</span><br><span class="line">lyshark(config-if-range)# no shutdown        // 开启所选端口</span><br><span class="line">lyshark(config-if-range)# exit               // 退出所选端口</span><br></pre></td></tr></table></figure></p>
<p>3.配置交换机虚拟管理接口的名称,IP地址和子网掩码,并开启管理接口,方便远程维护.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lyshark(config)# interface vlan 1                          // 创建虚拟接口vlan1并进入</span><br><span class="line">lyshark(config-if)# ip address 192.168.1.10 255.255.255.0  // 配置IP和子网掩码</span><br><span class="line">lyshark(config-if)# no shutdown                            // 开启端口</span><br><span class="line">lyshark(config-if)# exit</span><br></pre></td></tr></table></figure></p>
<p>4.配置好虚拟终端以及密码,并允许远程Telnet登陆.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lyshark(config)# line vty 0 2              // 配置序号为0-2的3个虚拟终端</span><br><span class="line">lyshark(config-line)# password admin       // 配置虚拟终端登陆密码为admin</span><br><span class="line">lyshark(config-line)# login                // 开启登陆,允许远程登陆</span><br><span class="line">lyshark(config-line)# exit</span><br></pre></td></tr></table></figure></p>
<p>若要关闭虚拟终端登陆功能,则需要执行以下命令,取消虚拟终端的登陆.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lyshark(config)# line vty 0 2              // 选择序号为0-2的3个虚拟终端</span><br><span class="line">lyshark(config-line)# no password          // 取消登陆密码</span><br><span class="line">lyshark(config-line)# no login             // 设置为不允许远程登陆 </span><br><span class="line">lyshark(config-line)# exit</span><br></pre></td></tr></table></figure></p>
<p>5.在全局模式下配置特权密码,如果明文与密文密码同时配置,则默认使用密文密码为准.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lyshark(config)# enable password 123123    // 配置明文密码</span><br><span class="line">lyshark(config)# enable secret 123321      // 配置密文密码</span><br><span class="line">lyshark(config)# exit</span><br></pre></td></tr></table></figure></p>
<p>6.全部配置完成以后,可以使用<code>running-config(查看内存配置数据)</code>,也可<code>startup-config(查看RAM存储器配置)</code>.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lyshark# show running-config              // 查看临时配置数据</span><br><span class="line">lyshark# show startup-config              // 查看RAM永久配置数据</span><br><span class="line"></span><br><span class="line">Building configuration...</span><br><span class="line">Current configuration : 1201 bytes</span><br><span class="line">!</span><br><span class="line">version 12.2                                     // 交换机版本</span><br><span class="line">hostname lyshark                                 // 主机名称</span><br><span class="line">!</span><br><span class="line">enable secret 5 $1$mERr$vPfXBroDs2s.F.9FQ1Le20   // 密文密码</span><br><span class="line">enable password 123123                           // 明文密码</span><br><span class="line">!</span><br><span class="line">interface Vlan1                                  // Vlan1 接口信息</span><br><span class="line"> ip address 192.168.1.10 255.255.255.0           // Vlan1 的管理接口地址</span><br><span class="line">!</span><br><span class="line">line con 0</span><br><span class="line">!</span><br><span class="line">line vty 0 2                                    // 远程管理终端</span><br><span class="line"> password admin                                 // 终端密码</span><br><span class="line"> login</span><br><span class="line"> end</span><br></pre></td></tr></table></figure></p>
<p>7.以上配置内容,当交换机断电后数据也将会清空,我们可以使用以下命令对配置数据永久存储起来.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lyshark# write                                 // 写入配置文件</span><br><span class="line">lyshark# erase startup-config                  // 清空配置文件</span><br><span class="line">lyshark# reload                                // 重新加载配置文件</span><br></pre></td></tr></table></figure></p>
<p>8.通过telnet客户端,连接192.168.1.10输入密码即可登陆交换机.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Trying 192.168.1.10 ...Open</span><br><span class="line">User Access Verification</span><br><span class="line"></span><br><span class="line">Password: </span><br><span class="line">lyshark&gt;</span><br><span class="line">lyshark&gt;enable</span><br><span class="line">Password: </span><br><span class="line">lyshark#</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h2 id="交换机常用参数"><a href="#交换机常用参数" class="headerlink" title="交换机常用参数"></a>交换机常用参数</h2><p><strong>常用查询命令:</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lyshark# show hosts                  // 查询主机表</span><br><span class="line">lyshark# show ip interface           // 查看端口IP配置信息</span><br><span class="line">lyshark# show history                // 查看历史记录</span><br><span class="line">lyshark# show terminal               // 查看终端记录大小</span><br><span class="line">lyshark# show version                // 查询交换机版本</span><br><span class="line">lyshark# show running-config         // 显示所有的配置</span><br><span class="line">lyshark# show interface              // 查询所有接口</span><br></pre></td></tr></table></figure></p>
<p><strong>端口选择命令:</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lyshark# configure terminal                  // 进入终端配置模式</span><br><span class="line">lyshark(config)#</span><br><span class="line">lyshark(config)# interface fa0/1             // 选择0号模块的1号端口</span><br><span class="line">lyshark(config-if)#</span><br><span class="line">lyshark(config-if)# exit</span><br><span class="line">lyshark(config)# interface range fa0/1-5     // 选择0号模块的1-5号端口</span><br><span class="line">lyshark(config-if-range)#</span><br></pre></td></tr></table></figure></p>
<p><strong>配置端口描述:</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lyshark(config)# interface range fa0/1-5</span><br><span class="line">lyshark(config-if-range)# description MyInterface</span><br></pre></td></tr></table></figure></p>
<p><strong>开启配置端口:</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lyshark# configure terminal                        // 进入命令配置页面</span><br><span class="line">lyshark(config)# interface range fa0/1-5           // 选择配置的端口</span><br><span class="line">lyshark(config-if-range)# switchport mode access   // 设置为通用模式</span><br><span class="line">lyshark(config-if-range)# speed 100                // 设置端口速率</span><br><span class="line">lyshark(config-if-range)# duplex auto              // 设置工作模式</span><br><span class="line">lyshark(config-if-range)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>配置端口模式:</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lyshark# configure terminal</span><br><span class="line">lyshark(config)# interface fa0/1</span><br><span class="line">lyshark(config-if)# switchport mode access          // 设置为通用模式</span><br><span class="line">lyshark(config-if)# switchport mode multi           // 该模式很少用</span><br><span class="line">lyshark(config-if)# switchport mode trunk           // 设置为交换机模式</span><br></pre></td></tr></table></figure></p>
<p><strong>启用/禁用端口:</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lyshark# configure terminal                    // 进入命令配置模式</span><br><span class="line">lyshark(config)# interface range fa0/1-24      // 选择1-24口</span><br><span class="line">lyshark(config-if-range)# shutdown             // 关闭所有端口</span><br><span class="line">lyshark(config-if-range)# exit</span><br><span class="line"></span><br><span class="line">lyshark(config)# interface range Gig0/1-2      // 选择高速通信端口</span><br><span class="line">lyshark(config-if-range)# shutdown             // 关闭所有端口</span><br><span class="line">lyshark(config-if-range)# no shutdown          // 开启所有端口</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h2 id="交换机实现VLAN"><a href="#交换机实现VLAN" class="headerlink" title="交换机实现VLAN"></a>交换机实现VLAN</h2><p>VLAN(Virtual Local Area Network),中文名为虚拟局域网,是一种使用交换机将局域网内的设备在逻辑上划分成一个个网段的技术,即在物理网络上进一步划分逻辑网络,VLAN可以突破地理位置的限制,完全基于实际管理需要来划分网络,例如在单个交换机内划分为不同的区域,不同区域之间无法互相通信,来实现相互隔离.</p>
<p>VLAN具有与普通局域网相同的属性,第二层的单播,多播和广播帧只能在相同的VLAN内转发,扩散,而不会直接进入其他VLAN中,因此同一个VLAN内的主机即使位于不同的交换机上,也可以互相访问,而不是同一VLAN的主机,即使连接在同一交换机上,也无法通过数据链路层互相访问.如果一个VLAN内的主机想访问另一个VLAN内的主机,必须通过一个三层设备,如路由器或三层交换机实现通信.</p>
<h3 id="◆单交换机实现VLAN◆"><a href="#◆单交换机实现VLAN◆" class="headerlink" title="◆单交换机实现VLAN◆"></a>◆单交换机实现VLAN◆</h3><p>如前所述,基于端口的VLAN属于静态VLAN,它是划分网络最简单,最有效和最常用的方法,下面将在单台交换机上配置静态VLAN,来实现两个网段的数据隔离,以下实验是一种网络拓扑中最简单的拓扑结构图,适合于小型办公网络,其实验拓扑图如下.</p>
<p><img src="/picture/20190306155829.jpg" alt="NetWork"></p>
<p><strong>初始化配置:</strong> 初始化交换机,开启5个交换口,其他交换口关闭保证安全性.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Switch&gt; enable</span><br><span class="line">Switch# configure terminal</span><br><span class="line"></span><br><span class="line">Switch(config)# hostname switch0                 // 配置主机名称</span><br><span class="line">Switch0(config)# interface range fa0/1-5         // 选择1-5号端口</span><br><span class="line">Switch0(config-if-range)# speed 100              // 设置端口速率</span><br><span class="line">Switch0(config-if-range)# no shutdown            // 开启端口</span><br><span class="line">Switch0(config-if-range)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>创建VLAN区域:</strong> 创建两个VLAN区域,分别命名为<code>vlan10为CaiWu</code>部和<code>vlan20为XiaoShou</code>部两个部门,命令如下.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Switch0&gt; enable</span><br><span class="line">Switch0# configure terminal</span><br><span class="line"></span><br><span class="line">Switch0(config)# vlan 10                   // 将VLAN 10配置为CaiWu部门</span><br><span class="line">Switch0(config-vlan)# name CaiWu</span><br><span class="line">Switch0(config-vlan)# exit</span><br><span class="line"></span><br><span class="line">Switch0(config)# vlan 20                   // 将VLAN 20配置为XiaoShou部门</span><br><span class="line">Switch0(config-vlan)# name XiaoShou</span><br><span class="line">Switch0(config-vlan)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>添加VLAN端口:</strong> 指定端口加入到新创建的VLAN中,将<code>fa0/1-3号</code>端口放到CaiWu,<code>fa0/4-5号</code>端口放到XiaoShou里.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Switch0(config)# interface range fa0/1-3                // 选择1-3号端口</span><br><span class="line">Switch0(config-if-range)# switchport mode access        // 开启端口</span><br><span class="line">Switch0(config-if-range)# switchport access vlan 10     // 指定将1-3号端口加入到vlan10</span><br><span class="line">Switch0(config-if-range)# exit</span><br><span class="line"></span><br><span class="line">Switch0(config)# interface range fa0/4-5</span><br><span class="line">Switch0(config-if-range)# switchport mode access</span><br><span class="line">Switch0(config-if-range)# switchport access vlan 20    // 指定将4-5号端口加入到vlan20</span><br><span class="line">Switch0(config-if-range)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>测试环节:</strong> 最后分别给五台设备配置好IP地址,并通过ping命令测试联通性.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#----设置客户主机IP地址+网关-------------------------</span><br><span class="line"></span><br><span class="line">[主机名]         [主机IP]           [网关]</span><br><span class="line">PC0           192.168.10.1     192.168.10.254</span><br><span class="line">PC1           192.168.10.2     192.168.10.254</span><br><span class="line">PC2           192.168.10.3     192.168.10.254</span><br><span class="line">PC3           192.168.20.1     192.168.20.254</span><br><span class="line">PC4           192.168.20.2     192.168.20.254</span><br><span class="line"></span><br><span class="line">#----设置好后测试网络连通性-------------------------</span><br><span class="line">C:\&gt;ping 192.168.10.1</span><br><span class="line">Reply from 192.168.20.1: bytes=32 time=1ms TTL=127</span><br><span class="line">C:\&gt;ping 192.168.10.2</span><br><span class="line">Reply from 192.168.20.1: bytes=32 time=1ms TTL=127</span><br><span class="line">C:\&gt;ping 192.168.10.3</span><br><span class="line">Reply from 192.168.20.1: bytes=32 time=1ms TTL=127</span><br></pre></td></tr></table></figure></p>
<h3 id="◆跨交换机实现VLAN◆"><a href="#◆跨交换机实现VLAN◆" class="headerlink" title="◆跨交换机实现VLAN◆"></a>◆跨交换机实现VLAN◆</h3><p>在实际的工作环境中,只在一台交换机上实现VLAN是远远不够的,通常需要跨越多台交换机实现VLAN划分网段,思科交换机通过使用Trunk干道端口的方式实现多台交换机数据共享,并实现跨交换机上的同一个VLAN之间的数据通信,其拓扑结构图如下.</p>
<p><img src="/picture/20190306174524.jpg" alt="NetWork"></p>
<p><strong>配置两台交换机:</strong> 分别初始化两台交换机,重命名两个交换机名字,并分别在两台交换机上开启3个端口.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#----配置switch0---------------------------------------------</span><br><span class="line">Switch&gt; enable</span><br><span class="line">Switch# configure terminal</span><br><span class="line">Switch(config)# hostname switch0               // 指定交换机1为switch0</span><br><span class="line">switch0(config)# interface range fa0/1-3       // 开启0模块上面的1-3号端口</span><br><span class="line">switch0(config-if-range)# speed auto           // 配置为自动模式</span><br><span class="line">switch0(config-if-range)# no shutdown          // 开启端口</span><br><span class="line">switch0(config-if-range)# exit</span><br><span class="line"></span><br><span class="line">#----配置switch1---------------------------------------------</span><br><span class="line">Switch&gt; enable</span><br><span class="line">Switch# configure terminal</span><br><span class="line">Switch(config)# hostname switch1</span><br><span class="line">switch1(config)# interface range fa0/1-3</span><br><span class="line">switch1(config-if-range)# speed auto</span><br><span class="line">switch1(config-if-range)# no shutdown</span><br><span class="line">switch1(config-if-range)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>配置交换机Trunk:</strong> 配置Trunk干道通信,也就是将两台交换机互相连接,此处配置<code>fa0/1接口</code>为干道网络接口.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#----配置switch0---------------------------------------------</span><br><span class="line">switch0&gt; enable</span><br><span class="line">switch0# configure terminal</span><br><span class="line">switch0(config)#</span><br><span class="line">switch0(config)# interface fa0/1               // 选择Fa0/1端口</span><br><span class="line">switch0(config-if)# switchport mode trunk      // 将1号端口设置为trunk模式</span><br><span class="line">switch0(config-if)# exit</span><br><span class="line"></span><br><span class="line">#----配置switch1---------------------------------------------</span><br><span class="line">switch1&gt; enable</span><br><span class="line">switch1# configure terminal</span><br><span class="line">switch1(config)#</span><br><span class="line">switch1(config)# interface fa0/1</span><br><span class="line">switch1(config-if)# switchport mode trunk</span><br><span class="line">switch1(config-if)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>配置Switch0:</strong> 配置switch0交换机,创建Vlan10和Vlan20,并分别将两个主机<code>PC0加入Vlan10</code>将<code>PC1加入到Vlan20</code>.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">switch0&gt; enable</span><br><span class="line">switch0# configure terminal</span><br><span class="line"></span><br><span class="line">#----创建接口信息---------------------------------------------</span><br><span class="line">switch0(config)#</span><br><span class="line">switch0(config)# vlan 10                         // 创建vlan11</span><br><span class="line">switch0(config-vlan)# exit</span><br><span class="line">switch0(config)# vlan 20                         // 创建vlan20</span><br><span class="line">switch0(config-vlan)# exit</span><br><span class="line"></span><br><span class="line">#----配置接口信息---------------------------------------------</span><br><span class="line">switch0(config)# interface fa0/2                // 将fa0/2号接口加入到vlan10</span><br><span class="line">switch0(config-if)# switchport mode access</span><br><span class="line">switch0(config-if)# switchport access vlan 10</span><br><span class="line">switch0(config-if)# exit</span><br><span class="line"></span><br><span class="line">switch0(config)# interface fa0/3                // 将fa0/3号接口加入到vlan20</span><br><span class="line">switch0(config-if)# switchport mode access</span><br><span class="line">switch0(config-if)# switchport access vlan 20</span><br><span class="line">switch0(config-if)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>配置Switch1:</strong> 配置switch1交换机,创建Vlan10和Vlan20,并分别将两个主机<code>PC2加入Vlan10</code>将<code>PC3加入到Vlan20</code>.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">switch1&gt; enable</span><br><span class="line">switch1# configure terminal</span><br><span class="line"></span><br><span class="line">#----创建接口信息---------------------------------------------</span><br><span class="line">switch1(config)# vlan 10</span><br><span class="line">switch1(config-vlan)# exit</span><br><span class="line"></span><br><span class="line">switch1(config)# vlan 20</span><br><span class="line">switch1(config-vlan)# exit</span><br><span class="line"></span><br><span class="line">#----配置接口信息---------------------------------------------</span><br><span class="line">switch1(config)# interface fa0/2</span><br><span class="line">switch1(config-if)# switchport mode access</span><br><span class="line">switch1(config-if)# switchport access vlan 10</span><br><span class="line">switch1(config-if)# exit</span><br><span class="line"></span><br><span class="line">switch1(config)# interface fa0/3</span><br><span class="line">switch1(config-if)# switchport mode access</span><br><span class="line">switch1(config-if)# switchport access vlan 20</span><br><span class="line">switch1(config-if)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>测试环节:</strong> 最后分别给五台设备配置好IP地址,并通过ping命令测试联通性.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#----设置客户主机IP地址+网关-------------------------</span><br><span class="line"></span><br><span class="line">[主机名]         [主机IP]           [网关]</span><br><span class="line">PC0           192.168.10.1     192.168.10.254</span><br><span class="line">PC1           192.168.20.1     192.168.20.254</span><br><span class="line">PC2           192.168.10.2     192.168.10.254</span><br><span class="line">PC3           192.168.20.2     192.168.20.254</span><br><span class="line"></span><br><span class="line">#----设置好后测试网络连通性-------------------------</span><br><span class="line"></span><br><span class="line">C:\&gt;ping 192.168.10.1</span><br><span class="line">Reply from 192.168.20.1: bytes=32 time=1ms TTL=127</span><br><span class="line">C:\&gt;ping 192.168.20.1</span><br><span class="line">Reply from 192.168.20.1: bytes=32 time=1ms TTL=127</span><br></pre></td></tr></table></figure></p>
<h3 id="◆通过VTP管理VLAN◆"><a href="#◆通过VTP管理VLAN◆" class="headerlink" title="◆通过VTP管理VLAN◆"></a>◆通过VTP管理VLAN◆</h3><p>如果网络中有多台交换机,每台交换机上有多个VLAN,此时采用传统方法在每台交换机上一个个配置VLAN不仅效率低而且增加了管理难度,为此思科开发了VTP技术来实现交换机之间自动实现数据的同步.</p>
<p>VTP它是VLAN中继协议,被称为VLAN链路聚集协议,它可以实现属于同一VTP域的交换机之间自动同步和传播VLAN信息,这样只需要在Server服务端添加VLAN信息,那么客户端将会自动同步,但需要注意的是同步时只能同步VLAN分组,至于端口的添加还得需要手动在每台交换机上添加,因为每一种交换机的接口数量都不太相同,故很难实现统一.</p>
<p><img src="/picture/20190307175817.jpg" alt="NetWork"></p>
<p><strong>配置两台交换机:</strong> 分别初始化两台交换机,重命名两个交换机名字,并分别在两台交换机上开启3个端口.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#----配置switch0---------------------------------------------</span><br><span class="line">Switch&gt; enable</span><br><span class="line">Switch# configure terminal</span><br><span class="line">Switch(config)# hostname switch0               // 配置交换机名称</span><br><span class="line">switch0(config)# interface range fa0/1-3       // 开启1-3号端口</span><br><span class="line">switch0(config-if-range)# speed auto           // 设置端口速率为自动模式</span><br><span class="line">switch0(config-if-range)# no shutdown          // 开启状态</span><br><span class="line">switch0(config-if-range)# exit</span><br><span class="line"></span><br><span class="line">#----配置switch1---------------------------------------------</span><br><span class="line">Switch&gt; enable</span><br><span class="line">Switch# configure terminal</span><br><span class="line">Switch(config)# hostname switch1</span><br><span class="line">switch1(config)# interface range fa0/1-3</span><br><span class="line">switch1(config-if-range)# speed auto</span><br><span class="line">switch1(config-if-range)# no shutdown</span><br><span class="line">switch1(config-if-range)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>配置交换机Trunk:</strong> 将两台交换机的<code>fa0/1</code>端口,配置成<code>Trunk通信模式</code>,同步数据使用.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#----配置switch0---------------------------------------------</span><br><span class="line">switch0&gt; enable</span><br><span class="line">switch0# configure terminal</span><br><span class="line">switch0(config)# interface fa0/1                  // 选择1号端口</span><br><span class="line">switch0(config-if)# switchport mode trunk         // 将端口设置成trunk模式</span><br><span class="line">switch0(config-if)# exit</span><br><span class="line"></span><br><span class="line">#----配置switch1---------------------------------------------</span><br><span class="line">switch1&gt; enable</span><br><span class="line">switch1# configure terminal</span><br><span class="line">switch1(config)# interface fa0/1</span><br><span class="line">switch1(config-if)# switchport mode trunk</span><br><span class="line">switch1(config-if)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>配置Switch0:</strong> 在<code>switch0</code>上创建VTP管理域,设置名称为<code>manage</code>,密码为<code>123123</code>配置命令如下.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">switch0&gt; enable</span><br><span class="line">switch0# configure terminal</span><br><span class="line">switch0(config)# vtp domain manage             // 创建名为manage的管理域</span><br><span class="line">switch0(config)# vtp mode server               // 将本交换机设置为server模式</span><br><span class="line">switch0(config)# vtp password 123123           // 设置VTP同步密码为123123</span><br><span class="line">switch0(config)# exit</span><br><span class="line"></span><br><span class="line">#----查看VTP状态---------------------------------------------</span><br><span class="line">switch0# show vtp status                       // 查看VTP同步状态</span><br><span class="line">VTP Version                     : 2            // VTP的版本</span><br><span class="line">Configuration Revision          : 0            // 此处为非0说明同步成功</span><br><span class="line">Maximum VLANs supported locally : 255</span><br><span class="line">Number of existing VLANs        : 5</span><br><span class="line">VTP Operating Mode              : Server      // 指定是server模式</span><br><span class="line">VTP Domain Name                 : manage      // 同步名称为manage</span><br><span class="line">VTP Pruning Mode                : Disabled</span><br><span class="line">VTP V2 Mode                     : Disabled</span><br><span class="line">VTP Traps Generation            : Disabled</span><br><span class="line">MD5 digest                      : 0x65 0x6A 0x3C 0x35 0x8B 0xF5 0x0D 0xC0 </span><br><span class="line">Configuration last modified by 0.0.0.0 at 0-0-00 00:00:00</span><br><span class="line">Local updater ID is 0.0.0.0 (no valid interface found)</span><br></pre></td></tr></table></figure></p>
<p><strong>配置Switch1:</strong> 在<code>switch1</code>上创建VTP同步域,设置模式为<code>client</code>,密码为123123,配置命令如下.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">switch1&gt; enable</span><br><span class="line">switch1# configure terminal</span><br><span class="line">switch1(config)# vtp domain manage             // 设置同步域名称</span><br><span class="line">switch1(config)# vtp mode client               // 设置成客户端模式</span><br><span class="line">switch1(config)# vtp password 123123           // 指定同步密码</span><br><span class="line">switch1(config)#exit</span><br><span class="line"></span><br><span class="line">#----查看VTP状态---------------------------------------------</span><br><span class="line">switch1# show vtp status                       // 查询状态</span><br><span class="line">VTP Version                     : 2</span><br><span class="line">Configuration Revision          : 0            // 此处为非0说明同步成功</span><br><span class="line">Maximum VLANs supported locally : 255</span><br><span class="line">Number of existing VLANs        : 5</span><br><span class="line">VTP Operating Mode              : Client</span><br><span class="line">VTP Domain Name                 : manage</span><br><span class="line">VTP Pruning Mode                : Disabled</span><br><span class="line">VTP V2 Mode                     : Disabled</span><br><span class="line">VTP Traps Generation            : Disabled</span><br><span class="line">MD5 digest                      : 0x65 0x6A 0x3C 0x35 0x8B 0xF5 0x0D 0xC0 </span><br><span class="line">Configuration last modified by 0.0.0.0 at 0-0-00 00:00:00</span><br></pre></td></tr></table></figure></p>
<p><strong>创建VLAN配置:</strong> 在·<code>Server端</code>创建一些VLAN列表,并在<code>Client客户端</code>执行同步命令,即可实现同步数据.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#----配置switch0---------------------------------------------</span><br><span class="line">switch0&gt; enable</span><br><span class="line">switch0# configure terminal</span><br><span class="line"></span><br><span class="line">switch0(config)# vlan 10</span><br><span class="line">switch0(config-vlan)# exit</span><br><span class="line"></span><br><span class="line">switch0(config)# vlan 20</span><br><span class="line">switch0(config-vlan)# exit</span><br><span class="line"></span><br><span class="line">#----配置switch1---------------------------------------------</span><br><span class="line">switch1&gt; enable</span><br><span class="line">switch1# copy run start           // 开始同步数据</span><br></pre></td></tr></table></figure></p>
<p><strong>测试环节:</strong> 最后分别给五台设备配置好IP地址,并通过ping命令测试联通性.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#----设置客户主机IP地址+网关-------------------------</span><br><span class="line"></span><br><span class="line">[主机名]         [主机IP]           [网关]</span><br><span class="line">PC0           192.168.10.1     192.168.10.254</span><br><span class="line">PC1           192.168.20.1     192.168.20.254</span><br><span class="line">PC2           192.168.10.2     192.168.10.254</span><br><span class="line">PC3           192.168.20.2     192.168.20.254</span><br><span class="line"></span><br><span class="line">#----设置好后测试网络连通性-------------------------</span><br><span class="line"></span><br><span class="line">C:\&gt;ping 192.168.10.1</span><br><span class="line">Reply from 192.168.20.1: bytes=32 time=1ms TTL=127</span><br><span class="line">C:\&gt;ping 192.168.20.1</span><br><span class="line">Reply from 192.168.20.1: bytes=32 time=1ms TTL=127</span><br></pre></td></tr></table></figure></p>
<h3 id="◆三层交换实现VLAN◆"><a href="#◆三层交换实现VLAN◆" class="headerlink" title="◆三层交换实现VLAN◆"></a>◆三层交换实现VLAN◆</h3><p>如果要在不同的VLAN之间进行数据通信,则必须利用一个具有三层(网络层)功能的设备来实现,目前常用的设备有三层交换机和路由器,在组建大型网络时出于安全考虑,必须把局域网按照功能划分为一个个小的局域网,来保证安全性,这就使得VLAN技术得以运用,但有时候我们还需要实现跨网段通信,则三层交换机可以实现我们的需求.</p>
<p>虽然路由器可以完成不同网段之间跨网段通信,但是由于路由器端口数量有限,且路由速度慢,因此三层交换机就诞生了,三层交换机是指具有路由功能的交换机,也就是实现了二层的转发和三层的交换,其价格便宜性价比高,目前是组网的绝佳选择,以下是一个三层交换机组网小案例,不仅实现了VLAN的隔离,还可以实现跨网段通信.</p>
<p><img src="/picture/20190308135714.jpg" alt="NetWork"></p>
<p><strong>配置二层交换(两台):</strong> 首先配置2个二层交换机,将<code>fa0/1配成trunk</code>,<code>fa0/2配成vlan10</code>,<code>fa0/3配成vlan20</code>.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#----初始化---------------------------------------------</span><br><span class="line">Switch&gt; enable</span><br><span class="line">Switch# configure terminal</span><br><span class="line">Switch(config)# hostname switch0              // 配置交换机名称(两次配置不能相同)</span><br><span class="line">switch(config)# interface range fa0/1-3       // 开启1-3号端口</span><br><span class="line">switch(config-if-range)# speed auto           // 设置端口速率为自动模式</span><br><span class="line">switch(config-if-range)# no shutdown          // 开启状态</span><br><span class="line">switch(config-if-range)# exit</span><br><span class="line"></span><br><span class="line">#----配置trunk-------------------------------------------</span><br><span class="line">Switch(config)# interface fa0/1               // 将此通道配置成trunk模式</span><br><span class="line">Switch(config-if)# switchport mode trunk      // 配置成trunk模式</span><br><span class="line">Switch(config-if)# switchport trunk allowed vlan all</span><br><span class="line">Switch(config-if)# no shutdown                // 开启端口</span><br><span class="line">Switch(config-if)# exit</span><br><span class="line"></span><br><span class="line">#----配置VLAN--------------------------------------------</span><br><span class="line">switch0(config)# vlan 10                       // 创建vlan10</span><br><span class="line">switch0(config-vlan)# exit</span><br><span class="line">switch0(config)# vlan 20                       // 创建vlan20</span><br><span class="line">switch0(config-vlan)# exit</span><br><span class="line"></span><br><span class="line">#----加入VLAN组------------------------------------------</span><br><span class="line">switch(config)# interface range fa0/2         // 将fa0/2端口加入vlan10</span><br><span class="line">switch(config-if-range)# switchport mode access</span><br><span class="line">switch(config-if-range)# switchport access vlan 10</span><br><span class="line">switch(config-if-range)# exit</span><br><span class="line"></span><br><span class="line">#----加入VLAN组------------------------------------------</span><br><span class="line">switch(config)# interface range fa0/3         // 将fa0/3端口加入vlan20</span><br><span class="line">switch(config-if-range)# switchport mode access</span><br><span class="line">switch(config-if-range)# switchport access vlan 20</span><br><span class="line">switch(config-if-range)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>配置三层交换机:</strong> 配置三层交换机,添加<code>vlan10,vlan20 端口</code>,并将<code>fa0/1-2设置为trunk</code>,供二层交换数据.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Switch&gt; enable</span><br><span class="line">Switch# configure terminal</span><br><span class="line"></span><br><span class="line">#----配置VLAN--------------------------------------------</span><br><span class="line">Switch(config)# vlan 10</span><br><span class="line">Switch(config-vlan)# exit</span><br><span class="line">Switch(config)# vlan 20</span><br><span class="line">Switch(config-vlan)# exit</span><br><span class="line"></span><br><span class="line">#----配置端口--------------------------------------------</span><br><span class="line">Switch(config)# interface range f0/1-2                    // 选择1-2号端口</span><br><span class="line">Switch(config-if)# switchport mode trunk                  // 将端口设置为trunk模式</span><br><span class="line">Switch(config-if)# no shutdown</span><br><span class="line">Switch(config-if)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>配置三层交换网关:</strong> 在三层交换机上,分别为每个虚拟子接口vlan10,vlan20配置一个网关地址.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Switch&gt; enable</span><br><span class="line">Switch# configure terminal</span><br><span class="line"></span><br><span class="line">#----配置网关--------------------------------------------</span><br><span class="line">Switch# interface vlan 10                         // 选择Vlan10</span><br><span class="line">Switch# ip address 192.168.10.254 255.255.255.0   // 给Vlan10配置网关</span><br><span class="line">Switch# no shutdown                               // 启动端口</span><br><span class="line">Switch# exit</span><br><span class="line"></span><br><span class="line">#----配置网关--------------------------------------------</span><br><span class="line">Switch# interface vlan 20                          // 选择Vlan20</span><br><span class="line">Switch# ip address 192.168.20.254 255.255.255.0    // 给Vlan20配置网关</span><br><span class="line">Switch# no shutdown</span><br><span class="line">Switch# exit</span><br><span class="line"></span><br><span class="line">#----开启路由--------------------------------------------</span><br><span class="line">Switch(config)# ip routing                         // 开启路由</span><br><span class="line">Switch(config)# exit</span><br><span class="line"></span><br><span class="line">#----查看路由--------------------------------------------</span><br><span class="line">Switch# show ip route                              // 显示路由结果</span><br><span class="line">Gateway of last resort is not set</span><br><span class="line">C    192.168.10.0/24 is directly connected, Vlan10</span><br><span class="line">C    192.168.20.0/24 is directly connected, Vlan20</span><br></pre></td></tr></table></figure></p>
<p><strong>客户机配置网关:</strong> 给每个客户机配置好IP地址和网关参数,并测试连通性,成功后则四个IP都能PING通.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#----设置客户主机IP地址+网关-------------------------</span><br><span class="line"></span><br><span class="line">[主机名]         [主机IP]           [网关]</span><br><span class="line">PC0           192.168.10.1     192.168.10.254</span><br><span class="line">PC1           192.168.20.1     192.168.20.254</span><br><span class="line">PC2           192.168.10.2     192.168.10.254</span><br><span class="line">PC3           192.168.20.2     192.168.20.254</span><br><span class="line"></span><br><span class="line">#----设置好后测试网络连通性-------------------------</span><br><span class="line"></span><br><span class="line">C:\&gt;ping 192.168.10.1</span><br><span class="line">Reply from 192.168.20.1: bytes=32 time=1ms TTL=127</span><br><span class="line">C:\&gt;ping 192.168.20.1</span><br><span class="line">Reply from 192.168.20.1: bytes=32 time=1ms TTL=127</span><br></pre></td></tr></table></figure></p>
<h3 id="◆单臂路由实现VLAN◆"><a href="#◆单臂路由实现VLAN◆" class="headerlink" title="◆单臂路由实现VLAN◆"></a>◆单臂路由实现VLAN◆</h3><p>单臂路由是指在路由器的一个物理接口上通过配置子接口的方式,实现原来相互隔离的不同VLAN之间的通信,子接口是在物理接口上衍生出来的逻辑接口,一个物理接口可以衍生出许多的逻辑接口.</p>
<p>一般路由器的物理接口数量有限,如果每个VLAN都使用一个物理接口进行连接,在网络中VLAN数量较多的情况下需要使用多台路由器才能实现VLAN之间的通信,而通过使用子接口可以在一个物理接口上容纳更多的VLAN,从而很好的解决了此问题.</p>
<p><img src="/picture/20190308201953.jpg" alt="NetWork"></p>
<p><strong>配置交换机:</strong> 在交换机上创建虚拟局域网<code>vlan10和vlan20</code>,并将<code>fa0/2-3</code>端口加入到<code>vlan10和vlan20</code>中.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Switch&gt; enable</span><br><span class="line">Switch# configure terminal</span><br><span class="line"></span><br><span class="line">#----开启交换机端口--------------------------------------------</span><br><span class="line">Switch(config)# hostname switch0               // 配置交换机名称</span><br><span class="line">switch0(config)# interface range fa0/1-3       // 开启1-3号端口</span><br><span class="line">switch0(config-if-range)# speed auto           // 设置端口速率为自动模式</span><br><span class="line">switch0(config-if-range)# no shutdown          // 开启状态</span><br><span class="line">switch0(config-if-range)# exit</span><br><span class="line"></span><br><span class="line">#----创建vlan10和vlan20---------------------------------------</span><br><span class="line">switch0(config)# vlan 10</span><br><span class="line">switch0(config-vlan)# exit</span><br><span class="line">switch0(config)#</span><br><span class="line">switch0(config)# vlan 20</span><br><span class="line">switch0(config-vlan)# exit</span><br><span class="line"></span><br><span class="line">#----将fa0/2端口加入到vlan10中---------------------------------</span><br><span class="line">switch0(config)# interface fa0/2</span><br><span class="line">switch0(config-if-range)# switchport mode access</span><br><span class="line">switch0(config-if-range)# switchport access vlan 10</span><br><span class="line">switch0(config-if-range)# exit</span><br><span class="line"></span><br><span class="line">#----将fa0/3端口加入到vlan20中---------------------------------</span><br><span class="line">switch0(config)# interface fa0/3</span><br><span class="line">switch0(config-if-range)# switchport mode access</span><br><span class="line">switch0(config-if-range)# switchport access vlan 20</span><br><span class="line">switch0(config-if-range)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>设置Trunk模式:</strong> 将交换机与路由器相连的端口设置为Trunk模式,此处设置交换机的<code>fa0/1</code>口为Trunk.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Switch0&gt; enable</span><br><span class="line">Switch0# configure terminal</span><br><span class="line"></span><br><span class="line">Switch0(config)# interface f0/1                      // 选择1号端口</span><br><span class="line">Switch0(config-if)# switchport mode trunk            // 将端口设置为trunk模式</span><br><span class="line">Switch0(config-if)# no shutdown</span><br><span class="line">Switch0(config-if)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>配置路由器:</strong> 在路由器的<code>Fa0/0</code>以太网接口上创建逻辑接口,并使用<code>IEEE802.1Q协议</code>封装.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Router&gt; enable</span><br><span class="line">Router# configure terminal</span><br><span class="line"></span><br><span class="line">#----开启路由器的以太网物理接口fa0/0---------------------------</span><br><span class="line">Router(config)# interface fa0/0</span><br><span class="line">Router(config-if)# no shutdown</span><br><span class="line">Router(config-if)# exit</span><br><span class="line"></span><br><span class="line">#----在以太网接口上创建fa0/0.10子接口--------------------------</span><br><span class="line">Router(config)# interface fa0/0.10                              // 指定子接口名称</span><br><span class="line">Router(config-subif)# encapsulation dot1q 10                    // 使用IEEE协议封装</span><br><span class="line">Router(config-subif)# ip address 192.168.10.254 255.255.255.0   // 设置子接口IP参数</span><br><span class="line">Router(config-subif)# no shutdown</span><br><span class="line">Router(config-subif)# exit</span><br><span class="line"></span><br><span class="line">#----在以太网接口上创建fa0/0.20子接口--------------------------</span><br><span class="line">Router(config)# interface fa0/0.20</span><br><span class="line">Router(config-subif)# encapsulation dot1q 20</span><br><span class="line">Router(config-subif)# ip address 192.168.20.254 255.255.255.0</span><br><span class="line">Router(config-subif)# no shutdown</span><br><span class="line">Router(config-subif)# exit</span><br><span class="line"></span><br><span class="line">#----开启路由功能,并查看路由状态-------------------------------</span><br><span class="line">Router(config)# ip routing</span><br><span class="line">Router(config)# exit</span><br><span class="line"></span><br><span class="line">Router# show ip route</span><br><span class="line">Gateway of last resort is not set</span><br><span class="line">C    192.168.0.0/24 is directly connected, FastEthernet0/0.20</span><br><span class="line">C    192.168.10.0/24 is directly connected, FastEthernet0/0.10</span><br></pre></td></tr></table></figure></p>
<p><strong>客户机配置网关:</strong> 给每个客户机配置好IP地址和网关参数,并测试连通性,成功后则四个IP都能PING通.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#----设置客户主机IP地址+网关-------------------------</span><br><span class="line"></span><br><span class="line">[主机名]         [主机IP]           [网关]</span><br><span class="line">PC0           192.168.10.1     192.168.10.254</span><br><span class="line">PC1           192.168.20.1     192.168.20.254</span><br><span class="line"></span><br><span class="line">#----设置好后测试网络连通性-------------------------</span><br><span class="line"></span><br><span class="line">C:\&gt;ping 192.168.10.1</span><br><span class="line">Reply from 192.168.20.1: bytes=32 time=1ms TTL=127</span><br><span class="line">C:\&gt;ping 192.168.20.1</span><br><span class="line">Reply from 192.168.20.1: bytes=32 time=1ms TTL=127</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h2 id="实战-构建小型局域网"><a href="#实战-构建小型局域网" class="headerlink" title="实战:构建小型局域网"></a>实战:构建小型局域网</h2><p>接下来将通过模拟器组件一个中小型网络拓扑结构,总共划分为4个区域,分别是<code>办公区域(Vlan10),宿舍区域(Vlan20)</code>这两个区域分别使用一台交换机来连接,剩下的<code>管理区域(Vlan30),客户区域(Vlan40)</code>放在一个交换机里,通过VLAN技术将其隔离开来,最后开启三层交换的路由转发功能,并实现跨区域通信,接下来看一下实验拓扑图.</p>
<p><img src="/picture/20190309124359.jpg" alt="NetWork"></p>
<p><strong>配置核心交换机:</strong> 首先配置<code>三层核心交换机 switch</code>,创建VTP管理域以及创建VLAN.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Switch&gt; enable</span><br><span class="line">Switch# configure terminal</span><br><span class="line"></span><br><span class="line">#----配置VTP管理端-------------------------------</span><br><span class="line">Switch(config)# vtp domain lyshark    // 创建VTP域并命名为lyshark</span><br><span class="line">Switch(config)# vtp mode server       // 设置VTP域模式为server</span><br><span class="line">Switch(config)# vtp password 123123   // 设置VTP密码为123123</span><br><span class="line"></span><br><span class="line">#----接着创建VLAN--------------------------------</span><br><span class="line">Switch(config)# vlan 10</span><br><span class="line">Switch(config-vlan)# exit</span><br><span class="line">Switch(config)# vlan 20</span><br><span class="line">Switch(config-vlan)# exit</span><br><span class="line">Switch(config)# vlan 30</span><br><span class="line">Switch(config-vlan)# exit</span><br><span class="line">Switch(config)# vlan 40</span><br><span class="line">Switch(config-vlan)# exit</span><br><span class="line"></span><br><span class="line">#----开启三层交换机trunk端口----------------------</span><br><span class="line">Switch(config)# interface range fa0/1-3</span><br><span class="line">Switch(config-if)#</span><br><span class="line">Switch(config-if)# switchport trunk encapsulation dot1q</span><br><span class="line">Switch(config-if)# switchport mode trunk</span><br></pre></td></tr></table></figure></p>
<p><strong>配置办公区:</strong> 接着配置<code>二层交换机 switch0</code>,配置成VTP客户端,并将<code>fa0/1端口</code>配置成trunk模式.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Switch&gt; enable</span><br><span class="line">Switch# configure terminal</span><br><span class="line">Switch(config)# hostname switch0</span><br><span class="line"></span><br><span class="line">#----配置VTP客户端-------------------------------</span><br><span class="line">switch0(config)# vtp domain lyshark           // 配置VTP客户端,名称</span><br><span class="line">switch0(config)# vtp mode client              // 配置成client客户端模式</span><br><span class="line">switch0(config)# vtp password 123123          // 配置密码</span><br><span class="line"></span><br><span class="line">#----开启二层交换机trunk端口----------------------</span><br><span class="line">switch0(config)# interface fa0/1</span><br><span class="line">switch0(config-if)# switchport mode trunk</span><br><span class="line">switch0(config-if)# exit</span><br><span class="line">switch0(config)# exit</span><br><span class="line"></span><br><span class="line">#----查看数据同步是否生效-------------------------</span><br><span class="line">switch0# show vlan brief</span><br><span class="line"></span><br><span class="line">10   VLAN0010                         active    </span><br><span class="line">20   VLAN0020                         active    </span><br><span class="line">30   VLAN0030                         active    </span><br><span class="line">40   VLAN0040                         active    </span><br><span class="line">1002 fddi-default                     active    </span><br><span class="line">1003 token-ring-default               active    </span><br><span class="line">1004 fddinet-default                  active    </span><br><span class="line">1005 trnet-default                    active    </span><br><span class="line"></span><br><span class="line">#----最后将剩下的端口全部添加到VLAN10-------------</span><br><span class="line">switch0(config)# interface range fa0/2-24</span><br><span class="line">switch0(config-if-range)# switchport mode access</span><br><span class="line">switch0(config-if-range)# switchport access vlan 10</span><br><span class="line">switch0(config-if-range)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>配置宿舍区:</strong> 接着配置<code>二层交换机 switch1</code>,配置成VTP客户端,并将<code>fa0/1端口</code>配置成trunk模式.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Switch&gt; enable</span><br><span class="line">Switch# configure terminal</span><br><span class="line">Switch(config)# hostname switch1</span><br><span class="line"></span><br><span class="line">#----配置VTP客户端-------------------------------</span><br><span class="line">switch1(config)# vtp domain lyshark           // 配置VTP客户端,名称</span><br><span class="line">switch1(config)# vtp mode client              // 配置成client客户端模式</span><br><span class="line">switch1(config)# vtp password 123123          // 配置密码</span><br><span class="line"></span><br><span class="line">#----开启二层交换机trunk端口----------------------</span><br><span class="line">switch1(config)# interface fa0/1</span><br><span class="line">switch1(config-if)# switchport mode trunk</span><br><span class="line">switch1(config-if)# exit</span><br><span class="line">switch1(config)# exit</span><br><span class="line"></span><br><span class="line">#----查看数据同步是否生效-------------------------</span><br><span class="line">switch1# show vlan brief</span><br><span class="line"></span><br><span class="line">10   VLAN0010                         active    </span><br><span class="line">20   VLAN0020                         active    </span><br><span class="line">30   VLAN0030                         active    </span><br><span class="line">40   VLAN0040                         active    </span><br><span class="line">1002 fddi-default                     active    </span><br><span class="line">1003 token-ring-default               active    </span><br><span class="line">1004 fddinet-default                  active    </span><br><span class="line">1005 trnet-default                    active    </span><br><span class="line"></span><br><span class="line">#----最后将剩下的端口全部添加到VLAN20-------------</span><br><span class="line">switch1(config)# interface range fa0/2-24</span><br><span class="line">switch1(config-if-range)# switchport mode access</span><br><span class="line">switch1(config-if-range)# switchport access vlan 20</span><br><span class="line">switch1(config-if-range)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>配置管理/客户区:</strong> 接着配置<code>二层交换机 switch2</code>,配置成VTP客户端,并将<code>fa0/1端口</code>配置成trunk模式.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Switch&gt; enable</span><br><span class="line">Switch# configure terminal</span><br><span class="line">Switch(config)# hostname switch2</span><br><span class="line"></span><br><span class="line">#----配置VTP客户端-------------------------------</span><br><span class="line">switch2(config)# vtp domain lyshark           // 配置VTP客户端,名称</span><br><span class="line">switch2(config)# vtp mode client              // 配置成client客户端模式</span><br><span class="line">switch2(config)# vtp password 123123          // 配置密码</span><br><span class="line"></span><br><span class="line">#----开启二层交换机trunk端口----------------------</span><br><span class="line">switch2(config)# interface fa0/1</span><br><span class="line">switch2(config-if)# switchport mode trunk</span><br><span class="line">switch2(config-if)# exit</span><br><span class="line">switch2(config)# exit</span><br><span class="line"></span><br><span class="line">#----查看数据同步是否生效-------------------------</span><br><span class="line">switch2# show vlan brief</span><br><span class="line"></span><br><span class="line">10   VLAN0010                         active    </span><br><span class="line">20   VLAN0020                         active    </span><br><span class="line">30   VLAN0030                         active    </span><br><span class="line">40   VLAN0040                         active    </span><br><span class="line">1002 fddi-default                     active    </span><br><span class="line">1003 token-ring-default               active    </span><br><span class="line">1004 fddinet-default                  active    </span><br><span class="line">1005 trnet-default                    active    </span><br><span class="line"></span><br><span class="line">#----将fa0/2-3两台,添加到VLAN30-----------------</span><br><span class="line">switch2(config)# interface range fa0/2-3</span><br><span class="line">switch2(config-if-range)# switchport mode access</span><br><span class="line">switch2(config-if-range)# switchport access vlan 30</span><br><span class="line">switch2(config-if-range)# exit</span><br><span class="line"></span><br><span class="line">#----将fa0/4-5两台,添加到VLAN30-----------------</span><br><span class="line">switch2(config)# interface range fa0/4-5</span><br><span class="line">switch2(config-if-range)# switchport mode access</span><br><span class="line">switch2(config-if-range)# switchport access vlan 40</span><br><span class="line">switch2(config-if-range)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>开启三层路由:</strong> 最后配置核心交换机<code>Switch</code>,并开启路由功能,分别为每个网段指定一个网关.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Switch&gt; enable</span><br><span class="line">Switch# configure terminal</span><br><span class="line">Switch(config)# ip routing             // 开启三层路由功能</span><br><span class="line"></span><br><span class="line">#----给Vlan10添加一个网关-----------------</span><br><span class="line">Switch(config)# interface vlan 10</span><br><span class="line">Switch(config-if)# ip address 192.168.10.254 255.255.255.0</span><br><span class="line">Switch(config-if)# no shutdown</span><br><span class="line">Switch(config-if)# exit</span><br><span class="line"></span><br><span class="line">#----给Vlan20添加一个网关-----------------</span><br><span class="line">Switch(config)# interface vlan 20</span><br><span class="line">Switch(config-if)# ip address 192.168.20.254 255.255.255.0</span><br><span class="line">Switch(config-if)# no shutdown</span><br><span class="line">Switch(config-if)# exit</span><br><span class="line"></span><br><span class="line">#----给Vlan30添加一个网关-----------------</span><br><span class="line">Switch(config)# interface vlan 30</span><br><span class="line">Switch(config-if)# ip address 192.168.30.254 255.255.255.0</span><br><span class="line">Switch(config-if)# no shutdown</span><br><span class="line">Switch(config-if)# exit</span><br><span class="line"></span><br><span class="line">#----给Vlan40添加一个网关-----------------</span><br><span class="line">Switch(config)# interface vlan 40</span><br><span class="line">Switch(config-if)# ip address 192.168.40.254 255.255.255.0</span><br><span class="line">Switch(config-if)# no shutdown</span><br><span class="line">Switch(config-if)# exit</span><br></pre></td></tr></table></figure></p>
<p><strong>客户机配置网段:</strong> 给每个客户机配置好IP地址和网关参数,并测试连通性,成功后则IP都能PING通.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#----设置客户主机IP地址+网关-------------------------</span><br><span class="line"></span><br><span class="line">[主机名]         [主机IP]           [网关]</span><br><span class="line">PC0           192.168.10.1     192.168.10.254</span><br><span class="line">PC1           192.168.10.2     192.168.10.254</span><br><span class="line"></span><br><span class="line">PC2           192.168.20.1     192.168.20.254</span><br><span class="line">PC3           192.168.20.2     192.168.20.254</span><br><span class="line"></span><br><span class="line">PC4           192.168.30.1     192.168.30.254</span><br><span class="line">PC5           192.168.30.2     192.168.30.254</span><br><span class="line"></span><br><span class="line">PC6           192.168.40.1     192.168.40.254</span><br><span class="line">PC7           192.168.40.2     192.168.40.254</span><br><span class="line"></span><br><span class="line">#----设置好后测试网络连通性-------------------------</span><br><span class="line">C:\&gt;ping 192.168.10.1</span><br><span class="line">Reply from 192.168.20.1: bytes=32 time=1ms TTL=127</span><br><span class="line">C:\&gt;ping 192.168.20.1</span><br><span class="line">Reply from 192.168.20.1: bytes=32 time=1ms TTL=127</span><br></pre></td></tr></table></figure></p>
<p><br></p>

      
    </div>

    

<!--增加的底部版权代码-->
<div>
      
        
<div class="my_post_copyright">
  <p><span>本文标题:</span><a href="/2019/03/05/网络设备配置/思科交换机配置笔记/">思科交换机配置笔记</a></p>
  <p><span>文章作者:</span><a href="/" title="访问 王瑞 的个人博客">王瑞</a></p>
  <p><span>发布时间:</span>2019年03月05日 - 10:03</p>
  <p><span>最后更新:</span>2019年04月16日 - 14:04</p>
  <p><span>原始链接:</span><a href="/2019/03/05/网络设备配置/思科交换机配置笔记/" title="思科交换机配置笔记">https://www.mkdirs.com/2019/03/05/网络设备配置/思科交换机配置笔记/</a>
  </p>
  <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者</p>
</div>

      
</div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/网络设备配置/" rel="tag"> <i class="fa fa-tag"></i> 网络设备配置</a>
          
            <a href="/tags/Cisco/" rel="tag"> <i class="fa fa-tag"></i> Cisco</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/03/04/网络设备配置/计算机网络体系概述/" rel="next" title="计算机网络体系概述">
                <i class="fa fa-chevron-left"></i> 计算机网络体系概述
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/03/14/网络设备配置/思科生成树与端口聚合/" rel="prev" title="思科生成树与端口聚合">
                思科生成树与端口聚合 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="王瑞">
            
              <p class="site-author-name" itemprop="name">王瑞</p>
              <div class="site-description motion-element" itemprop="description">记录点滴技术成长之路</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">101</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">13</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://github.com/lyshark" title="GitHub &rarr; https://github.com/lyshark" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="mailto:1181506874@qq.com" title="E-Mail &rarr; mailto:1181506874@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://plus.google.com/lyshark" title="Google &rarr; https://plus.google.com/lyshark" rel="noopener" target="_blank"><i class="fa fa-fw fa-google"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://twitter.com/lyshark" title="Twitter &rarr; https://twitter.com/lyshark" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="http://wpa.qq.com/msgrd?v=3&uin=1181506874&site=hupaiyule&menu=yes" title="QQ &rarr; http://wpa.qq.com/msgrd?v=3&uin=1181506874&site=hupaiyule&menu=yes" rel="noopener" target="_blank"><i class="fa fa-fw fa-qq"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://weixin.qq.com" title="Wechat &rarr; https://weixin.qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-weixin"></i></a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#交换机的初始化"><span class="nav-text">交换机的初始化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#交换机常用参数"><span class="nav-text">交换机常用参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#交换机实现VLAN"><span class="nav-text">交换机实现VLAN</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#◆单交换机实现VLAN◆"><span class="nav-text">◆单交换机实现VLAN◆</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#◆跨交换机实现VLAN◆"><span class="nav-text">◆跨交换机实现VLAN◆</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#◆通过VTP管理VLAN◆"><span class="nav-text">◆通过VTP管理VLAN◆</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#◆三层交换实现VLAN◆"><span class="nav-text">◆三层交换实现VLAN◆</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#◆单臂路由实现VLAN◆"><span class="nav-text">◆单臂路由实现VLAN◆</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#实战-构建小型局域网"><span class="nav-text">实战:构建小型局域网</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">

<!-- 屏蔽版权开始 -->
&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">王瑞</span>
<!-- 屏蔽版权结束 -->

  

  
</div>









        








        
      </div>
    </footer>

    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.1"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.1"></script>




  
  <script src="/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  


  


  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
